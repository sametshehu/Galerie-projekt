<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Upload Minimal Test</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
        import { getStorage, ref as storageRef, uploadBytes } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-storage.js";

        // Firebase-Konfiguration
        const firebaseConfig = {
            apiKey: "AIzaSyBHzpeP7Ng4qwzpLmB8ny2cWij-S2Bvah4",
            authDomain: "drita2-bd8f2.firebaseapp.com",
            projectId: "drita2-bd8f2",
            storageBucket: "drita2-bd8f2.appspot.com",
            messagingSenderId: "1089581498100",
            appId: "1:1089581498100:web:5b0b6925fdab597d9528a1"
        };

        // Firebase initialisieren
        const app = initializeApp(firebaseConfig);
        const storage = getStorage(app);

        let selectedFile = null;

        // Datei auswählen
        function selectImage(event) {
            selectedFile = event.target.files[0];
            if (selectedFile) {
                console.log("Bild ausgewählt:", selectedFile.name);
            } else {
                console.error("Keine Datei ausgewählt.");
            }
        }

        // Datei hochladen
        function uploadImage() {
            if (selectedFile) {
                console.log("Upload wird gestartet...");
                const storageReference = storageRef(storage, 'images/' + selectedFile.name);
                uploadBytes(storageReference, selectedFile)
                    .then(() => {
                        console.log("Bild hochgeladen.");
                        alert("Bild erfolgreich hochgeladen!");
                    })
                    .catch((error) => {
                        console.error("Fehler beim Hochladen des Bildes:", error);
                    });
            } else {
                alert("Bitte wähle ein Bild aus, bevor du es hochlädst.");
            }
        }
    </script>
</head>
<body>

    <h1>Firebase Upload Minimal Test</h1>

    <!-- Bild auswählen -->
    <input type="file" id="imageUpload" accept="image/*" onchange="selectImage(event)">
    
    <!-- Button zum Hochladen -->
    <button onclick="uploadImage()">Bild hochladen</button>

</body>
</html>
